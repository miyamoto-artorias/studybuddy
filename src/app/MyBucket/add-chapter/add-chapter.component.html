<div class="chapter-container">
    <h2>Add Chapters to Course #{{ courseId }}</h2>
  
    <button (click)="addChapterForm()" class="add-chapter-btn">
      <i class="fas fa-plus"></i> Add New Chapter
    </button>
  
    <div *ngFor="let form of chapterForms; let i = index" class="chapter-form-card">
      <h3>Chapter {{ i + 1 }}</h3>
  
      <!-- Success Message -->
      <div *ngIf="successMessages[i]" class="alert alert-success">
        <i class="fas fa-check-circle"></i> {{ successMessages[i] }}
      </div>
  
      <!-- Error Message -->
      <div *ngIf="errorMessages[i]" class="alert alert-danger">
        <i class="fas fa-exclamation-circle"></i> {{ errorMessages[i] }}
      </div>
  
      <form #chapterForm="ngForm" (ngSubmit)="onSubmit(chapterForm, i)" *ngIf="!form.isSubmitted">
        <div class="form-group">
          <label for="title-{{i}}">Title *</label>
          <input 
            type="text" 
            id="title-{{i}}" 
            name="title-{{i}}" 
            [(ngModel)]="form.title" 
            required
            class="form-control"
            placeholder="Chapter title"
          >
        </div>
  
        <div class="form-group">
          <label for="description-{{i}}">Description *</label>
          <textarea 
            id="description-{{i}}" 
            name="description-{{i}}" 
            [(ngModel)]="form.description" 
            required
            class="form-control"
            rows="3"
            placeholder="Chapter description"
          ></textarea>
        </div>
  
        <div class="form-group">
          <label for="type-{{i}}">Type *</label>
          <input 
            type="text" 
            id="type-{{i}}" 
            name="type-{{i}}" 
            [(ngModel)]="form.type" 
            required
            class="form-control"
            placeholder="Chapter type (e.g., pdf, video)"
          >
        </div>
  
        <div class="form-actions">
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="isLoading"
          >
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
            {{ isLoading ? 'Creating...' : 'Create Chapter' }}
          </button>
  
          <button 
            type="button" 
            class="btn btn-outline-danger"
            (click)="removeChapterForm(i)"
            [disabled]="isLoading"
          >
            <i class="fas fa-trash"></i> Remove
          </button>
        </div>
      </form>
  
      <div *ngIf="form.isSubmitted" class="chapter-success">
        <i class="fas fa-check-circle success-icon"></i>
        <span>Chapter added successfully!</span>
        <button 
          class="btn btn-sm btn-outline-secondary"
          (click)="form.isSubmitted = false"
        >
          <i class="fas fa-plus"></i> Add Another
        </button>
      </div>
    </div>
  </div>