<div class="course-form-container">
  <h2>Create New Course</h2>
  
  <!-- Success Message -->
  <div *ngIf="successMessage" class="alert alert-success">
    <i class="fas fa-check-circle"></i> {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
  </div>

  <form #courseForm="ngForm" (ngSubmit)="onSubmit(courseForm)" class="course-form">
    <div class="form-group">
      <label for="title">Course Title *</label>
      <input 
        type="text" 
        id="title" 
        name="title" 
        [(ngModel)]="course.title" 
        required
        minlength="3"
        maxlength="100"
        class="form-control"
        placeholder="Enter course title"
      >
      <small *ngIf="courseForm.controls['title']?.invalid && courseForm.controls['title']?.touched" class="text-danger">
        Course title is required (3-100 characters)
      </small>
    </div>

    <div class="form-group">
      <label for="description">Description *</label>
      <textarea 
        id="description" 
        name="description" 
        [(ngModel)]="course.description" 
        required
        minlength="10"
        maxlength="500"
        class="form-control"
        rows="4"
        placeholder="Describe the course content"
      ></textarea>
      <small *ngIf="courseForm.controls['description']?.invalid && courseForm.controls['description']?.touched" class="text-danger">
        Description is required (10-500 characters)
      </small>
    </div>

    <div class="form-group">
      <label for="picture">Course Image URL</label>
      <input 
        type="url" 
        id="picture" 
        name="picture" 
        [(ngModel)]="course.picture" 
        class="form-control"
        placeholder="https://example.com/course-image.jpg"
        pattern="https?://.+"
      >
      <small *ngIf="courseForm.controls['picture']?.invalid && courseForm.controls['picture']?.touched" class="text-danger">
        Please enter a valid URL starting with http:// or https://
      </small>
    </div>

    <div class="form-group">
      <label for="tags">Tags</label>
      <div class="input-group mb-2">
        <input 
          type="text" 
          id="tags" 
          name="newTag" 
          [(ngModel)]="newTag" 
          class="form-control"
          placeholder="Enter tag and press Add"
        >
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          (click)="addTag()"
          [disabled]="!newTag.trim()">
          Add
        </button>
      </div>
      
      <div class="tags-container">
        <span *ngFor="let tag of course.tags" class="tag-item">
          {{ tag }}
          <button type="button" class="btn-close btn-close-sm" (click)="removeTag(tag)"></button>
        </span>
        <small *ngIf="course.tags.length === 0" class="text-muted">
          No tags yet. Add tags to make your course more discoverable.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="price">Price (USD) *</label>
      <div class="input-group">
        <span class="input-group-text">$</span>
        <input 
          type="number" 
          id="price" 
          name="price" 
          [(ngModel)]="course.price" 
          required
          min="0"
          max="1000"
          step="0.01"
          class="form-control"
          placeholder="0.00"
        >
      </div>
      <small *ngIf="courseForm.controls['price']?.invalid && courseForm.controls['price']?.touched" class="text-danger">
        Valid price required (0-1000)
      </small>
    </div>

    <div class="form-group">
      <label>Categories *</label>
      <div class="categories-container">
        <div *ngFor="let category of categories" class="category-item">
          <div class="form-check">
            <input 
              type="checkbox" 
              class="form-check-input" 
              [id]="'category-' + category.id"
              (change)="toggleCategory(category.id)"
              [checked]="course.categoryIds.includes(category.id)"
            >
            <label class="form-check-label" [for]="'category-' + category.id">
              {{ category.title }}
            </label>
          </div>
          <small class="text-muted">{{ category.description }}</small>
        </div>
      </div>
      <small *ngIf="course.categoryIds.length === 0 && courseForm.submitted" class="text-danger">
        Please select at least one category
      </small>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="isLoading || courseForm.invalid"
      >
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
        <i *ngIf="!isLoading" class="fas fa-plus-circle me-2"></i>
        {{ isLoading ? 'Creating...' : 'Create Course' }}
      </button>

      <button 
        type="button" 
        class="btn btn-outline-secondary ms-2"
        (click)="courseForm.resetForm()"
        [disabled]="isLoading"
      >
        <i class="fas fa-undo me-2"></i>
        Reset
      </button>
    </div>
  </form>
</div>